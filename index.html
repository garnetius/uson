<!DOCTYPE html>
<html>
<head>
  <title>USON</title>
  <meta charset="utf-8"/>
  <script type="module" type="text/javascript">
/* USON browser demonstration page */
"use strict"

import {Core} from "../core-js/core.mjs";

Core.infect();

import {USON} from "./uson.mjs";

let editor;
let tmout;

function parseUson() {
  clearTimeout (tmout);
  console.log (JSON.stringify (USON.parse (editor.value), null, 2));
}

function parseUsonTimeout() {
  clearTimeout (tmout);
  tmout = setTimeout (parseUson, 1000);
}

function main() {
  editor = document.getElementById ("editor");
  editor.addEventListener ("change", parseUson);
  editor.addEventListener ("keyup", parseUsonTimeout);
  tmout = null;
}

document.addEventListener ("DOMContentLoaded", main);
  </script>
  <style type="text/css">
body {
  margin: 0;
  border: 0;
  padding: 0;
}

#container {
  width: 100%;
  height: 100vh;
  border: 4em transparent solid;
  box-sizing: border-box;
}

textarea {
  font-size: 140%;
  margin: 0;
  border: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  resize: none;
  outline: none;
}
  </style>
</head>
<body>
  <div id="container"><textarea id="editor">{}</textarea></div>
</body>
</html>
